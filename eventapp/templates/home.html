{% extends "base.html" %}

{% block title %}Select Tickets{% endblock %}

{% block content %}
  <div class="text-center mt-3">
    <span>&uarr; Swipe for More &darr;</span>
  </div>
  <div class="container my-4">
    <h2 class="text-center mb-4">Upcoming Events</h2>

    <!-- Using Bootstrap's card-group to ensure all cards are handled uniformly -->
    <div class="card-group">

      <!-- Card 3: Winter Wonderland -->
      <div class="card border-danger" style="background: linear-gradient(135deg, #f8f9fa 0%, #e3f2fd 100%);">
        <img src="static/pic/25notimewonder.png" class="card-img-top" alt="Winter Wonderland at Howe Ranch" style="border-bottom: 3px solid #dc3545;">
        <div class="card-body">
          <h5 class="card-title text-danger" style="font-family: 'serif'; text-shadow: 1px 1px 2px rgba(0,0,0,0.1);">â„ï¸ Winter Wonderland Open Farm Day at Howe Ranch â€” Discover the Magic!</h5>
          <div class="card-text text-center p-2 mb-3" style="background: linear-gradient(45deg, #dc3545, #28a745); color: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
            <strong>ğŸ—“ï¸ Nov. 30, Dec. 7, Dec. 14, Dec. 21, Christmas Eve, and New Year's Eve!</strong><br>
            <strong>ğŸ•“ Select your spot!</strong>
          </div>
          
          <p class="card-text">
            This holiday season, step into a twinkle-lit Winter Wonderland where baby Highland calves in velvet bows, alpacas in festive scarves, and jingling donkeys welcome you into a world of pure Christmas magic. Designed as a micro holiday festival, not a crowded fair, this magical experience lets your family wander, cuddle, decorate, and explore at your own pace â€” with every station included.
          </p>
          
          <p class="card-text">
            <strong>âœ¨ Your Winter Wonderland Pass Includes:</strong>
          </p>
          <ul class="card-text">
            <li>ğŸ® Snuggle sessions with our tiniest Highland calves in their winter fluff</li>
            <li>ğŸ“¸ Five enchanted holiday scenes, including snowy woodland and miniature Christmas villages</li>
            <li>ğŸ¬ Seasonal treats & hot drinks for kids and grown-ups alike</li>
            <li>ğŸª Cookie decorating with Mrs. Claus</li>
            <li>ğŸ… Visit & photo moment with Santa in his vintage red throne</li>
            <li>ğŸ Festive scavenger hunt with sweet surprises along the way</li>
            <li>ğŸ Meet the alpacas and mischievous mini goats (in their holiday scarves, of course)</li>
            <li>ğŸŒŸ No lines. No rushing. Real animal time and holiday magic â€” all included.</li>
          </ul>
          
          <div class="text-center p-2 mb-3" style="background: #fff3cd; border-radius: 8px; border: 2px dashed #ffc107;">
            <strong>ğŸ“ Passes limited: $35 per guest, kids under 1 are free</strong>
          </div>
          
          <p class="card-text">
            Celebrate the season somewhere unforgettable â€” cuddle a baby cow with snowflakes in its fur and capture magical moments you'll want on this year's Christmas card.
          </p>
          
          <div class="border p-3 mb-3" style="background: #f8f9fa; border-radius: 8px;">
            <div class="form-group mb-3">
              <label for="winter-event-date" class="form-label"><strong>Select a Date</strong></label>
              <select class="form-control" id="winter-event-date" required onchange="updateTimeSlots()">
                <option value="">Choose a Date</option>
                <option value="nov30">Sunday, November 30</option>
                <option value="dec7">Sunday, December 7</option>
                <option value="dec14">Sunday, December 14</option>
                <option value="dec21">Sunday, December 21</option>
                <option value="christmas">Wednesday, December 24 (Christmas Eve)</option>
                <option value="newyears">Wednesday, December 31 (New Year's Eve)</option>
              </select>
            </div>
            
            <div class="form-group mb-3">
              <label for="winter-time-slot" class="form-label"><strong>Select Time Slot</strong></label>
              <select class="form-control" id="winter-time-slot" required disabled>
                <option value="">First select a date</option>
              </select>
            </div>
            
            <div class="form-group mb-3">
              <label for="winter-tickets" class="form-label"><strong>Party Size</strong></label>
              <input type="number" class="form-control" id="winter-tickets" placeholder="Enter number of guests" required min="1" max="10">
            </div>
            
            <button onclick="goToCheckout('winter')" class="btn btn-danger w-100" style="background: linear-gradient(45deg, #dc3545, #28a745); border: none; font-weight: bold; text-shadow: 1px 1px 1px rgba(0,0,0,0.3);">ğŸ„ Book Your Winter Wonderland Adventure ğŸ„</button>
          </div>
          
          <div class="text-center small" style="color: #6c757d;">
            <strong>ğŸŸ Advance Reservation Only â€¢ No Passes at Gate â€¢ Limited Capacity</strong>
          </div>
          
          <div class="text-center small mt-2" style="color: #6c757d;">
            By making a booking you agree to: I have read and agree with the <a href="#" target="_blank">Farm Visitor FAQs</a> and <a href="#" target="_blank">Farm Policies</a>.
          </div>
        </div>
      </div>

<!-- Card 4: Private Mini Moo Experience -->
<div class="card">
  <img src="static/pic/privatemoome.jpg" class="card-img-top" alt="Private Mini Moo Experience at Howe Ranch">
  <div class="card-body">
    <h5 class="card-title">Private Mini Moo Experience at Howe Ranch</h5>

    <p class="card-text">
      Celebrate fall your way with a very special private cow cuddling and farm adventure for your date or group!
    </p>

    <ul class="card-text">
      <li>Squeeze our newest tiny fluffy Highland calves, brush and feed the mini herd, and meet alpacas, playful mini goats, donkeys, and new chicks.</li>
      <li>Bottle feeding of our youngest cow babies is included.</li>
      <li>Explore the farm, snap photos with tiny cow babies at festive backdrops, and take home a special souvenir bag.</li>
    </ul>

    <ul class="card-text">
      <li>ğŸ“ Available by appointment on select dates in October &amp; November (the farm is closed Nov. 17 - 29 while transforming to Winter Wonderland)</li>
      <li>ğŸ‘¥ For 1â€“10 guests max (infants under 1 are free)</li>
    </ul>

    <p class="card-text">$350 per private group (10 guests max ages 1+)</p>
    <p class="card-text">Come ready for fall fun and baby cow kisses!</p>

    <hr>

    <p class="card-text mb-1">By making a booking you agree to:</p>
    <ul class="card-text">
      <li>I have read and agree with the <a href="https://www.thehoweranch.com/_files/ugd/fca21d_07c8ac9947404371b3ff999e60d884f6.pdf" target="_blank">Farm Visitor FAQs</a> and <a href="https://www.thehoweranch.com/_files/ugd/fca21d_74995943378a482b99195b26463571b9.pdf" target="_blank">Farm Policies</a>.</li>
      <li>This private experience does not allow celebratory or food-related activities (e.g., no cake, decorations, etc.). We offer special gathering options that accommodate celebrations â€” see our Private Mini Moo Party on the <a href="https://www.thehoweranch.com/events" target="_blank">EVENTS</a> page.</li>
      <li>This experience is for 1â€“10 guests max (ages 1+). Groups over 10 may book a second tour at the same time, join an Open Farm Day, or reserve a private gathering.</li>
      <li>Experiences are transferable to other guests but cannot be refunded and cannot be rescheduled.</li>
    </ul>

    <a href="/select_tickets" class="btn btn-primary">Book Now</a>
  </div>
</div>

    </div> <!-- Close card-group -->
  </div> <!-- Close container -->

  <div class="text-center mt-3">
    <span>&uarr; Swipe for More &darr;</span>
  </div>

<script>
function updateTimeSlots() {
    const dateSelect = document.getElementById('winter-event-date');
    const timeSelect = document.getElementById('winter-time-slot');
    const selectedDate = dateSelect.value;
    
    // Clear existing options
    timeSelect.innerHTML = '';
    timeSelect.disabled = false;
    
    if (selectedDate === 'christmas' || selectedDate === 'newyears') {
        // Christmas Eve and New Year's Eve - 82 person capacity, single time slot
        timeSelect.innerHTML = '<option value="single">3:00 PM - 6:00 PM</option>';
    } else if (selectedDate) {
        // Nov 30, Dec 7, Dec 14, Dec 21 - tiered time slots, 50 each
        timeSelect.innerHTML = `
            <option value="">Choose a time slot</option>
            <option value="3pm">3:00 PM - 6:00 PM</option>
            <option value="4pm">4:00 PM - 7:00 PM</option>
        `;
    } else {
        timeSelect.innerHTML = '<option value="">First select a date</option>';
        timeSelect.disabled = true;
    }
}

function goToCheckout(eventType) {
    let eventId, tickets;
    
    if (eventType === 'spooky') {
        eventId = document.getElementById('spooky-event-date').value;
        tickets = document.getElementById('spooky-tickets').value;
        
        if (!eventId || !tickets) {
            alert('Please select a date and enter the number of guests.');
            return;
        }
    } else if (eventType === 'halloween') {
        eventId = '612'; // Halloween Spectacular event ID
        tickets = document.getElementById('halloween-tickets').value;
        
        if (!tickets) {
            alert('Please enter the number of guests.');
            return;
        }
    } else if (eventType === 'winter') {
        const dateValue = document.getElementById('winter-event-date').value;
        const timeSlot = document.getElementById('winter-time-slot').value;
        tickets = document.getElementById('winter-tickets').value;
        
        if (!dateValue || !timeSlot || !tickets) {
            alert('Please select a date, time slot, and enter the number of guests.');
            return;
        }
        
        // Map date and time combinations to event IDs
        const eventMapping = {
            'nov30_3pm': '676',
            'nov30_4pm': '677', 
            'dec7_3pm': '678',
            'dec7_4pm': '679',
            'dec14_3pm': '680',
            'dec14_4pm': '681',
            'dec21_3pm': '682',
            'dec21_4pm': '683',
            'christmas_single': '684',
            'newyears_single': '685'
        };
        
        const mappingKey = `${dateValue}_${timeSlot}`;
        eventId = eventMapping[mappingKey];
        
        if (!eventId) {
            alert('Please select a valid date and time combination.');
            return;
        }
    }
    
    // Redirect to checkout with URL parameters
    window.location.href = `/checkout?event_id=${eventId}&tickets=${tickets}`;
}
</script>

{% endblock %}
