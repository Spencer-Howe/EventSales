<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}The Howe Ranch Payment{% endblock %}</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href='https://unpkg.com/fullcalendar@5/main.min.css' rel='stylesheet' />
    <script src='https://unpkg.com/fullcalendar@5/main.min.js'></script>
    <script src="https://www.paypal.com/sdk/js?client-id={{ paypal_client_id }}&currency=USD"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=MuseoModerno:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
        }

        .footer-title {
            font-family: 'MuseoModerno', cursive;
            font-size: 1rem;
            margin-bottom: 0.25rem !important;
        }

        /* Hero Tech Banner */
        .tech-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .tech-hero h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tech-hero .subtitle {
            font-size: 1.2rem;
            margin-bottom: 20px;
            opacity: 0.95;
        }

        .tech-hero .cta-buttons {
            margin-top: 20px;
        }

        .tech-cta {
            background: #ff6b6b;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            text-decoration: none;
            margin: 0 10px;
            display: inline-block;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255,107,107,0.3);
        }

        .tech-cta:hover {
            background: #ff5252;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255,107,107,0.4);
            text-decoration: none;
        }

        .tech-cta.secondary {
            background: transparent;
            border: 2px solid white;
            color: white;
        }

        .tech-cta.secondary:hover {
            background: white;
            color: #667eea;
            transform: translateY(-2px);
        }


        /* Subtle footer tech ad */
        .howe-advertisement-container {
            background: #f8f9fa;
            padding: 15px 10px;
            color: #6c757d;
            text-align: center;
            border-top: 1px solid #e9ecef;
        }

        .howe-ad {
            margin: 0 auto;
            max-width: 500px;
            padding: 15px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }

        .ad-title {
            font-size: 1.2rem;
            margin: 0 0 8px 0;
            font-weight: 600;
            color: #495057;
        }

        .ad-subtitle {
            font-size: 0.9rem;
            margin: 0 0 8px 0;
            color: #6c757d;
            font-weight: 400;
        }

        .ad-description {
            font-size: 0.85rem;
            margin: 0 0 12px 0;
            color: #6c757d;
            line-height: 1.4;
        }

        .ad-btn {
            background: #007bff;
            color: white;
            padding: 6px 16px;
            border: none;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 500;
            text-decoration: none;
            margin: 0 5px;
            display: inline-block;
            transition: background-color 0.2s ease;
        }

        .ad-btn:hover {
            background: #0056b3;
            color: white;
            text-decoration: none;
        }

        .ad-btn.secondary {
            background: #6c757d;
        }

        .ad-btn.secondary:hover {
            background: #545b62;
        }

        /* Content cards enhancement */
        .card {
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border: none;
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        /* Ensure footer sticks to bottom */
        .content-wrapper {
            flex: 1 0 auto !important;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .tech-hero h1 {
                font-size: 2rem;
            }
            .tech-hero .subtitle {
                font-size: 1rem;
            }
            .tech-cta {
                padding: 10px 20px;
                font-size: 1rem;
                margin: 5px;
                display: block;
                max-width: 250px;
                margin-left: auto;
                margin-right: auto;
            }
        }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">
{% block navbar %}
<nav class="navbar navbar-expand-lg navbar-light bg-light justify-content-center">
    <a class="navbar-brand" href="https://www.thehoweranch.com/">
      <img src="/static/pic/logo2.jpg" alt="Logo" width="100" height="auto" class="d-inline-block align-text-top">
      <!-- Optionally, add text here if needed -->
    </a>
  </nav>
{% endblock %}

<div class="content-wrapper">
    <div class="container">

        {% block content %}
        <!-- Default content goes here -->
        {% endblock %}
    </div>
</div>
<footer class="bg-light text-center text-lg-start mt-auto">
    <!-- Enhanced Tech Services Advertisement -->
    <div class="howe-advertisement-container text-center">
        <div class="howe-ad">
            <h3 class="ad-title">üöÄ Howe Tech Solutions</h3>
            <p class="ad-subtitle">Software Engineering Graduate 2025</p>
            <p class="ad-description">
                Custom web applications ‚Ä¢ E-commerce platforms ‚Ä¢ Payment integrations ‚Ä¢ Database design ‚Ä¢ API development<br>
                <strong>Mission-first approach to building software that actually works for your business.</strong>
            </p>
            <a href="mailto:howeranchservices@gmail.com" class="ad-btn">Get Free Consultation</a>
            <a href="https://github.com/Spencer-Howe" class="ad-btn secondary">View Portfolio</a>
        </div>
    </div>

</footer>



<!-- Legal Acknowledgment Modal (ONLY for Open Farm Days) -->
<div class="modal fade" id="legalAcknowledgmentModal" tabindex="-1" aria-labelledby="legalModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header" style="background: linear-gradient(135deg, #d63384 0%, #b02a5b 100%); color: white;">
                <h5 class="modal-title fw-bold" id="legalModalLabel">üìã Experience Details & Policies</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                <div class="alert alert-warning">
                    <strong>‚ö†Ô∏è Please read all policies before proceeding to checkout.</strong><br>
                    <small>These experiences are only possible with the full support and cooperation of our guests.</small>
                </div>
                
                <h6 class="fw-bold mb-3" style="color: #d63384;">üéØ Experience Details</h6>
                <div id="experience-details" class="mb-4">
                    <!-- Experience-specific details will be populated here -->
                </div>

                <h6 class="fw-bold mb-3" style="color: #d63384;">üè° Preparing for Your Visit & Farm Policies</h6>
                <div class="small">
                    
                    <p><strong>Ethical Conduct & Community Standards</strong></p>
                    <p>Howe Ranch is a proud member of the National Miniature Cattle Farmers Group, committed to the highest standards of animal welfare, integrity, and community ethics. We maintain zero tolerance for criminal or exploitative conduct. Visitors found violating neighborhood and farm policies automatically forfeit their passes.</p>
                    
                    <p><strong>üö´ Arrival Guidelines - No Early Arrivals</strong></p>
                    <ul>
                        <li><strong>EARLY ARRIVALS STRICTLY PROHIBITED:</strong> Entry is strictly prohibited before your scheduled time slot due to farm liability management</li>
                        <li><strong>PRIVATE ROAD LAWS:</strong> 15 MPH speed limit on monitored, unpaved street - speeding will result in loss of passes</li>
                    </ul>

                    <p><strong>üêæ Animal Interactions & Safety</strong></p>
                    <ul>
                        <li><strong>NO DOGS:</strong> For safety of our animals and guests, dogs cannot be accommodated</li>
                        <li><strong>SAFETY:</strong> Wear sunscreen, hat, closed-toed shoes. Bring water for hydration</li>
                        <li><strong>SUPERVISED ONLY:</strong> Do not approach animals until staff reviews safety guidelines and is present</li>
                        <li>Children must be supervised by your group at all times</li>
                    </ul>

                    <p><strong>üìã Transferable Only ‚Äî No Refunds or Reschedules</strong></p>
                    <ul>
                        <li>Booked experiences are <strong>transferable</strong> to other guests but <strong>NOT refundable</strong></li>
                        <li>Experiences <strong>cannot be rescheduled</strong> - no exceptions</li>
                        <li>If transferring, we must receive the guest's name prior to arrival</li>
                    </ul>
                    
                    
                    <p><strong>üìÑ Required Reading:</strong></p>
                    <ul>
                        <li><a href="https://www.thehoweranch.com/_files/ugd/fca21d_000e01c6a9ca4def8e1b627746c15967.pdf" target="_blank">Farm Visitor FAQs</a></li>
                        <li><a href="https://www.thehoweranch.com/_files/ugd/fca21d_a30cd343d96b4be3913cded96c226b9f.pdf" target="_blank">Farm Policies</a></li>
                        <li>Liability waiver (completed after booking)</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn fw-bold text-white" style="background-color: #d63384;" id="acknowledge-and-continue" onclick="proceedToCheckout()">
                    ‚úì I Have Read and Agree - Continue to Checkout
                </button>
            </div>
        </div>
    </div>
</div>

<script>
// Global variables for checkout process (ONLY for Open Farm Days)
let pendingCheckoutData = null;

// Function to show legal modal ONLY for Open Farm Days
function showLegalModal(experienceType, checkoutData) {
    pendingCheckoutData = checkoutData;
    
    // Set experience-specific details for Open Farm Days only
    const experienceDetails = document.getElementById('experience-details');
    
    if (experienceType === 'open-farm-day') {
        experienceDetails.innerHTML = `
            <div class="card" style="border-color: #d63384;">
                <div class="card-body">
                    <h6 style="color: #d63384;">üíï Open Farm Day Experience</h6>
                    <ul class="small mb-0">
                        <li><strong>Group Size:</strong> Per guest pricing (1+ years)</li>
                        <li><strong>Pricing:</strong> $40/guest (1-3 guests) ‚Ä¢ $35/guest (4+ guests)</li>
                        <li><strong>Type:</strong> Shared experience with ~5-15 families onsite</li>
                        <li><strong>Setting:</strong> Community "micro festival" atmosphere</li>
                        <li><strong>Note:</strong> No private photo ops guaranteed</li>
                    </ul>
                </div>
            </div>
        `;
    }
    
    // Show the modal
    const modal = new bootstrap.Modal(document.getElementById('legalAcknowledgmentModal'));
    modal.show();
}

// Function to proceed to checkout after acknowledgment
function proceedToCheckout() {
    if (pendingCheckoutData) {
        // Hide the modal
        const modal = bootstrap.Modal.getInstance(document.getElementById('legalAcknowledgmentModal'));
        modal.hide();
        
        // Proceed with the original checkout
        window.location.href = pendingCheckoutData.url;
        
        // Clear pending data
        pendingCheckoutData = null;
    }
}
</script>

<!-- Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
