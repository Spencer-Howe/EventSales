{% extends "base.html" %}

{% block title %}Select Tickets{% endblock %}

{% block content %}

    <h1>Confirm Your Purchase</h1>

    <!-- Display Event Title and Description -->
    <h2>{{ event_title }}</h2>
    <p>{{ event_description }}</p>

    <p>{{ time_slot }}</p>
    <p>Number of Tickets: {{ tickets }}</p>
    {% if error_message %}
        <div class="alert alert-warning">
            {{ error_message }}
        </div>
    {% endif %}
    <p>Total Price: ${{ total_price }}</p>

    <label for="phone">Phone Number:</label>
    <small>We must have your verified phone number on file to complete your booking.</small><br>
    <input type="tel" id="phone" name="phone" required><br>

    <!-- Non-refundable notice -->
    <p style="margin-top: 10px; font-size: 0.9em; color: #555;">
    <strong>Contributions (passes/hay)</strong> are free for guests under 1 year old, are transferable,
    not refundable, and cannot be rescheduled. As our focus is on animal care, we do not have the capacity
    to accommodate changes â€” please do not call to request exceptions.
    </p>

    <div style="margin-top: 30px;"></div>

    <!-- Payment Methods -->
    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card">
                <div class="card-body text-center">
                    <h5 class="card-title"><i class="fab fa-paypal"></i> PayPal</h5>
                    <div id="paypal-button-container"></div>
                    <p id="result-message"></p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card">
                <div class="card-body text-center">
                    <h5 class="card-title"><i class="fab fa-bitcoin"></i> Cryptocurrency</h5>
                    <p class="text-muted">Bitcoin, Ethereum, USDC, USDT</p>
                    <a href="{{ url_for('crypto.crypto_checkout') }}" 
                       class="btn btn-warning btn-lg">
                        <i class="fab fa-bitcoin"></i> Pay with Crypto
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- PayPal SDK Script -->
    <script src="https://www.paypal.com/sdk/js?client-id={{ paypal_client_id }}&currency=USD"></script>

    <!-- Inline Script to Define totalAmount -->
    <script>var totalAmount = {{ total_price }};</script>

    <!-- External JavaScript File -->
    <script src="{{ url_for('static', filename='app.js') }}"></script>

{% endblock %}
